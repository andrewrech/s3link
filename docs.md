```

## s3link


Upload files to AWS S3 and generate authenticated URLs.

Usage of s3link:
  echo 'file.txt' | s3link
  echo 'pre-existing/bucket/key.ext' | s3link

Defaults:
  -expire string
    	URL lifetime (default "1m")
  -public
    	Create obfuscated public link?
  -qr
    	Generate QR code?

Environmental variables:

    export S3LINK_BUCKET=upload-bucket
    export AWS_SHARED_CREDENTIALS_PROFILE=default
    export S3LINK_OBFUSCATION_KEY=key-for-filename-obfuscation

```
<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# s3link

```go
import "github.com/andrewrech/s3link"
```

## Index

- [func acl(conn *s3.S3, b, k string, public bool)](<#func-acl>)
- [func checkDuration(expire *string) (minutes *time.Duration)](<#func-checkduration>)
- [func connect(vars envVars) (conn *s3.S3, uploader *s3manager.Uploader)](<#func-connect>)
- [func key(name string) string](<#func-key>)
- [func main()](<#func-main>)
- [func parse(l string) (b, k string, err error)](<#func-parse>)
- [func randomBytes(n int) []byte](<#func-randombytes>)
- [func randomHex(n int) string](<#func-randomhex>)
- [func read(in io.Reader) (out chan string, done chan int)](<#func-read>)
- [func upload(vars envVars, uploader *s3manager.Uploader, conn *s3.S3, in chan string, public *bool) (out chan string, done chan int)](<#func-upload>)
- [func uploadLine(vars envVars, uploader *s3manager.Uploader, conn *s3.S3, in, out chan string, public *bool, done chan int)](<#func-uploadline>)
- [func url(conn *s3.S3, in chan string, minutes *time.Duration, public, qr *bool) (done chan int)](<#func-url>)
- [func urlLine(conn *s3.S3, in chan string, minutes *time.Duration, public, qr *bool, done chan int)](<#func-urlline>)
- [func usage()](<#func-usage>)
- [type envVars](<#type-envvars>)
  - [func loadVars() (vars envVars, err error)](<#func-loadvars>)


## func [acl](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L284>)

```go
func acl(conn *s3.S3, b, k string, public bool)
```

acl assigns a private or public acl to an AWS S3 object\.

## func [checkDuration](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L83>)

```go
func checkDuration(expire *string) (minutes *time.Duration)
```

checkDuration checks the link expiration duration for correctness\.

## func [connect](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L100>)

```go
func connect(vars envVars) (conn *s3.S3, uploader *s3manager.Uploader)
```

connect reads shared AWS credentials and returns a connection\.

## func [key](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L234>)

```go
func key(name string) string
```

key generates an AWS S3 key\.

## func [main](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L33>)

```go
func main()
```

Upload files from Stdin to AWS S3 and generate an authenticated URL\. Usage: echo "bucket/key\.txt" | s3link ls \*pdf               | s3link \-bucket myBucket

## func [parse](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L261>)

```go
func parse(l string) (b, k string, err error)
```

parse parses a line of text to a bucket/key combination\.

## func [randomBytes](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L220>)

```go
func randomBytes(n int) []byte
```

randomBytes generates n random bytes

## func [randomHex](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L231>)

```go
func randomHex(n int) string
```

randomHex generates a random hex string with length of n e\.g: 67aab2d956bd7cc621af22cfb169cba8

## func [read](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L119>)

```go
func read(in io.Reader) (out chan string, done chan int)
```

reader reads lines from Stdin\, removes ANSI codes\, and passes the resulting strings to a channel\.

## func [upload](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L310>)

```go
func upload(vars envVars, uploader *s3manager.Uploader, conn *s3.S3, in chan string, public *bool) (out chan string, done chan int)
```

upload manages parallel uploads\.

## func [uploadLine](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L337>)

```go
func uploadLine(vars envVars, uploader *s3manager.Uploader, conn *s3.S3, in, out chan string, public *bool, done chan int)
```

uploadLine uploads files interpreted as strings from a channel to AWS S3 if the files exist\.

## func [url](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L151>)

```go
func url(conn *s3.S3, in chan string, minutes *time.Duration, public, qr *bool) (done chan int)
```

url manages parallel URL creation\.

## func [urlLine](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L172>)

```go
func urlLine(conn *s3.S3, in chan string, minutes *time.Duration, public, qr *bool, done chan int)
```

urlLine generates a pre\-signed AWS S3 URL\.

## func [usage](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L63>)

```go
func usage()
```

usage prints package usage\.

## type [envVars](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L388-L391>)

```go
type envVars struct {
    credentialProfile string
    bucket            string
}
```

### func [loadVars](<https://github.com/andrewrech/s3link/blob/main/s3link.go#L394>)

```go
func loadVars() (vars envVars, err error)
```

loadVars loads environmental variables\.



